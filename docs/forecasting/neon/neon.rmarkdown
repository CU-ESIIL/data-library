---
title: "neon"
format: gfm
---

```{r, include=FALSE}
my_token<- "eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJhdWQiOiJodHRwczovL2RhdGEubmVvbnNjaWVuY2Uub3JnL2FwaS92MC8iLCJzdWIiOiJ0dWZmQGNvbG9yYWRvLmVkdSIsInNjb3BlIjoicmF0ZTpwdWJsaWMiLCJpc3MiOiJodHRwczovL2RhdGEubmVvbnNjaWVuY2Uub3JnLyIsImV4cCI6MTg0MDgyMjY0MCwiaWF0IjoxNjgzMTQyNjQwLCJlbWFpbCI6InR1ZmZAY29sb3JhZG8uZWR1In0._Z_8kAkCRz8ou3YFgalSlB5AhdGKZ23D034inZRquMjnjAFK0-b1TPrj3pGryiAUIcUegqIBdCZAKIm24E0cfA"
```

```{r, cache=TRUE}
library(neonUtilities)
library(ggplot2)

foliar <- loadByProduct(dpID="DP1.10026.001", site="all", 
                        package="expanded", check.size=F,
                        token=my_token)


names(foliar)

ggplot(foliar$cfc_carbonNitrogen, aes(x = carbonPercent, y = CNratio)) +
  geom_point() +
  labs(title = "Carbon to Nitrogen Ratio vs Carbon Concentration",
       x = "Carbon Concentration (percent)",
       y = "Carbon to Nitrogen Ratio") +
  theme_minimal()
```

```{python, cache=TRUE, eval=FALSE}
import os
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from neon_api_tools.api_tools import neon_api_tools

# Set your NEON API token
my_token = "your_neon_api_token_here"

# Instantiate the API tools object
neon_tools = neon_api_tools()

# Download the NEON foliar data
foliar = neon_tools.loadByProduct(dpID="DP1.10026.001", site="all",
                                  package="expanded", check_size=False,
                                  token=my_token)

# Get the foliar dataframe
foliar_df = foliar['cfc_carbonNitrogen']

# Plot the carbon to nitrogen ratio against the carbon concentration
fig, ax = plt.subplots()
ax.scatter(foliar_df['carbonPercent'], foliar_df['CNratio'])
ax.set_xlabel("Carbon Concentration (percent)")
ax.set_ylabel("Carbon to Nitrogen Ratio")
ax.set_title("Carbon to Nitrogen Ratio vs Carbon Concentration")
plt.show()
```

