---
title: "Food and Agriculture Organization of the United Nations: Food Balance Sheets"
format: gfm
---
The Food Balance Sheets (FBS) dataset presents a comprehensive picture of the pattern of a country's food supply during a specified reference period, typically a year. The FBS shows for each food item (like wheat, rice, milk, meat, etc.) - the sources of supply (production, imports, and stock changes) and its utilization (exports, feed, seed, processing, waste, and other uses), leading to the final category of 'food available for human consumption'. https://www.fao.org/home/en

The FBS provides essential information on a country's food system, allowing for a better understanding of food flows, food availability, and changes in eating habits over time. The data can be used to assess nutritional patterns and to develop strategies for food security and sustainable food systems.

The data available include values for over 245 countries and territories from 1961 onwards. It includes information on crop and livestock products, including both primary and processed products. The values are given in terms of mass quantity (tonnes), and in some cases, you can also find caloric value (kcal) and protein and fat content (g).

The food balance sheet data can be accessed freely on the FAOSTAT platform, and can be downloaded in various formats.

```{r, cache=TRUE, warnings=FALSE}
# Load necessary libraries
library(FAOSTAT)
library(ggplot2)
library(dplyr)

data_folder <- "data_raw" 
dir.create(data_folder)
crop_production <- get_faostat_bulk(code = "QCL", data_folder = data_folder) # Show the structure of the data
str(crop_production)

saveRDS(crop_production, "data_raw/crop_production_e_all_data.rds")
```

```{r, cache=TRUE, warnings=FALSE}
# Now you can load your local version of the data from the RDS file 
crop_production <- readRDS("data_raw/crop_production_e_all_data.rds")
print(levels(factor(crop_production$item)))
```


```{r, cache=TRUE, warnings=FALSE, message=FALSE}
subset <- crop_production %>% 
  filter(item %in% c("Wine","Meat of buffalo, fresh or chilled", "Bees","Sugar beet", "Natural honey")) %>% 
  filter(area == "United States of America")

# Plot the data
ggplot(subset, aes(x = year, y = value, colour=item)) +
  geom_smooth() +
  labs(
    title = "USA supply of food items (kcal/capita/day)",
    x = "Year",
    y = "Food Supply (kcal/capita/day)"
  ) + theme_minimal()
```

